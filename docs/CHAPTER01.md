# Chapter01 - 리팩터링: 첫 번째 예시

## 1. 요약
### 1-3. 리팩터링의 첫 단계
- 리팩터링을 시작하기에 앞서 **가장 중요한 것은 제대로 작성된 테스트 코드**다.
### 1-4. statement() 함수 쪼개기
- 함수의 구조를 분리하는 과정에서 각 단계마다 [컴파일-테스트-커밋]의 과정을 반복할 것
- 여기서 말하는 각 단계란 변수명 변경, 함수 추출 등 사소한 부분을 포함한다.
- 이렇게 사소한 부분 또한 **[컴파일-테스트-커밋]의 과정을 반복하는 가장 큰 이유는 오류가 생기더라도 변경 폭이 작아 문제 해결이 쉽기 때문**이다.
- 변수명은 고민 또 고민
- 임시 변수는 가능한 질의 함수로 변경해 인라인 처리 하자
- 구조 분리 -> [임시 변수 질의 함수로 변경하기 -> 반복문 쪼개기 -> 문장 슬라이스] -> 함수 추출하기 
### 1-6. 계산 단계와 포맷팅 단계 분리하기
- 공연 요금을 계산하는 단계와 출력하는 부분을 분리
- 이를 통해 html, 평문 출력에서 같은 공연 요금 계산 메서드를 사용하여 중복을 줄일 수 있음
- 이를 위해 중간 데이터 구조를 활용
### 1-8. 다형성을 활용해 계산 코드 재구성하기
- 비극, 희극 요금 계산 방식을 다형성을 활용해 구현
- 이를 통해 다른 장르 계산 방식이 추가되어도 기존 코드의 변경을 최소화 

## 2. 리뷰
- 생각보다도 더 리팩터링 과정을 단계별로 잘게 쪼개 [컴파일-테스트-커밋]하는 과정이 인상적임
- 확실히 변경 폭이 작기 때문에 실수한 부분을 금방 찾을 수 있었음
- 또한 리팩터링 과정의 리듬감이 무슨 말인가 했는데 과정을 따라하는 것만으로도 리듬감을 충분히 느낄 수 있었음
- 리팩터링 과정에서 제일 중요한 것은 테스트 코드
- **제대로 작성된 테스트 코드란 무엇인지에 대해 깊은 고민이 필요할 듯**